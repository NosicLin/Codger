<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>基本语句</TITLE>
<META NAME="description" CONTENT="基本语句">
<META NAME="keywords" CONTENT="index">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="index.css">

<LINK REL="next" HREF="node7.html">
<LINK REL="previous" HREF="node5.html">
<LINK REL="up" HREF="index.html">
<LINK REL="next" HREF="node7.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html218"
  HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html216"
  HREF="index.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html210"
  HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html219"
  HREF="node7.html">字节码转换框架</A>
<B> Up:</B> <A NAME="tex2html217"
  HREF="index.html">index</A>
<B> Previous:</B> <A NAME="tex2html211"
  HREF="node5.html">运算符与表达式</A>
<BR>
<BR></DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html220"
  HREF="node6.html#SECTION00061000000000000000">简单语句</A>
<UL>
<LI><A NAME="tex2html221"
  HREF="node6.html#SECTION00061100000000000000">表达式语句</A>
<LI><A NAME="tex2html222"
  HREF="node6.html#SECTION00061200000000000000">赋值语句</A>
<LI><A NAME="tex2html223"
  HREF="node6.html#SECTION00061300000000000000">print语句</A>
</UL>
<BR>
<LI><A NAME="tex2html224"
  HREF="node6.html#SECTION00062000000000000000">循环语句</A>
<UL>
<LI><A NAME="tex2html225"
  HREF="node6.html#SECTION00062100000000000000">for语句</A>
<LI><A NAME="tex2html226"
  HREF="node6.html#SECTION00062200000000000000">while语句</A>
</UL>
<BR>
<LI><A NAME="tex2html227"
  HREF="node6.html#SECTION00063000000000000000">选择语句</A>
<UL>
<LI><A NAME="tex2html228"
  HREF="node6.html#SECTION00063100000000000000">if-elif-else语句</A>
</UL>
<BR>
<LI><A NAME="tex2html229"
  HREF="node6.html#SECTION00064000000000000000">跳转语句</A>
<UL>
<LI><A NAME="tex2html230"
  HREF="node6.html#SECTION00064100000000000000">break语句</A>
<LI><A NAME="tex2html231"
  HREF="node6.html#SECTION00064200000000000000">continue语句</A>
<LI><A NAME="tex2html232"
  HREF="node6.html#SECTION00064300000000000000">return语句</A>
</UL>
<BR>
<LI><A NAME="tex2html233"
  HREF="node6.html#SECTION00065000000000000000">异常语句</A>
<UL>
<LI><A NAME="tex2html234"
  HREF="node6.html#SECTION00065100000000000000">throw语句</A>
<LI><A NAME="tex2html235"
  HREF="node6.html#SECTION00065200000000000000">try-catch-finally语句</A>
</UL>
<BR>
<LI><A NAME="tex2html236"
  HREF="node6.html#SECTION00066000000000000000">定义语句</A>
<UL>
<LI><A NAME="tex2html237"
  HREF="node6.html#SECTION00066100000000000000">函数定义语句</A>
<LI><A NAME="tex2html238"
  HREF="node6.html#SECTION00066200000000000000">类定义语句</A>
</UL>
<BR>
<LI><A NAME="tex2html239"
  HREF="node6.html#SECTION00067000000000000000">模块管理语句</A>
<UL>
<LI><A NAME="tex2html240"
  HREF="node6.html#SECTION00067100000000000000">import语句</A>
<LI><A NAME="tex2html241"
  HREF="node6.html#SECTION00067200000000000000">export语句</A>
</UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION00060000000000000000">
基本语句</A>
</H1>
在Codger中，总共有16不同类型的语句，一个Codger源程序由一条或多条语句组成，语句与语句之间使用一个或者多个分隔符隔开，分隔符有两种：换行符和分号符。例如, 用换行符来分隔两条语句:<PRE>
a=3
b=4
</PRE>
或者当需要把多条语句写到一行时，可以用分号来分隔语句，例如:<PRE>
a=3;b=4
</PRE>
或者是使用类似于c风格的来分隔语句，例如:<PRE>
a=3;
b=4;
</PRE>
不同类型的语句有不同类型的语法规则，在源程只有遵守语法规则才会被解析器正确解析，Codger的语法分析模块使用bison<A NAME="tex2html13"
  HREF="footnode.html#foot478"><SUP><SPAN CLASS="arabic">9</SPAN></SUP></A>软件把描述Codger语法规则的LR(1)文法转换为LALR(1)分析表，来分析源程序的语法结构是否正确，最后生成与源程序等价的抽象语法树，以供后面的字节码生成模块进一步处理。

<P>
Codger中的16条语句被分为６类：简单语句，循环语句，选择语句，跳转语句，异常语句，定义语句，模块管理语句。下面部分依次介绍每类语句的语法规则。

<P>

<H2><A NAME="SECTION00061000000000000000">
简单语句</A>
</H2>

<H3><A NAME="SECTION00061100000000000000">
表达式语句</A>
</H3>
表达式在前面``表达式与算述符"这一部分已经介绍，如果一个表达式没有被其它语句使用，它的前后都有语句分隔符，在这种情况下，则被称为表达示语句，语法规则用文法表示为：<PRE>
expr_stmt = expr
</PRE>
表达式语句中，表达式会被运行，但表达式返回的结果没有其它对象引用，会被直接丢弃。
<BR>示例代码:<PRE>
1+2         #计算的结果3被直丢弃
add(1+3)    #函数add返回结果4，被丢弃
</PRE>

<P>

<H3><A NAME="SECTION00061200000000000000">
赋值语句</A>
</H3>
赋值语句是给可赋值对象赋于一个值，Codger中可赋值对象有：变量，集合中的元素，对象的成员。赋值语句分为两类：1）直接赋值：将值直接赋值给可赋值对象；2）运算后再赋值：先从可赋值对象中提取出原有的值，并与将要赋的值进行指定的运算后，再赋值给可赋值对象。语法规则用文法表示为：<PRE>
assign_stmt = assign_object assign_oper expr 
assign_oper =  "=" | "*=" | "/=" | "%=" | "+=" |
               "-=" | "&lt;&lt;=" | "&gt;&gt;=" | "&amp;=" | "^=" | "|="
assign_object = expr
</PRE>
其中expr为以变量，[expr], .identifier 结尾的表达式。
示例代码：<PRE>
a=3+4     
$a=4      
coord.x=0.3
array[3]+=4
</PRE>
<H3><A NAME="SECTION00061300000000000000">
print语句</A>
</H3>
print语句用于将对象的值输出到标准输出端，语法规则用文法表示为：<PRE>
print_stmt =  "print" [expr] { "," expr }
</PRE>
示例代码：<PRE>
print 2                    #输出:  2
print "Codger"+"Is"+"Good" #输出:  "CodgerIsGood"
print 3+3,3+4,1+2          #输出:  6 7 3
a=[3,4,5]
print a                    #输出:  [3,4,5]
</PRE>

<P>

<H2><A NAME="SECTION00062000000000000000">
循环语句</A>
</H2>

<H3><A NAME="SECTION00062100000000000000">
for语句</A>
</H3>
for语句用于遍历可迭代对象中的每一个元素，Codger中的可迭代对象有数组和散列表。语法规则用文法表示为：<PRE>
for_stmt = "for" assign_object "in" expr for_delimiter
                stmts
            "end"
for_delimiter = "\n" | ";" | "do"
</PRE>
在for语句运行时，每次从expr返回对象中取出一个元素，赋值给可赋值对象 assign_object，并执行语句stmts。当expr返回对象中的每个元素都被遍历完成时，for语句结束。
<BR>示例代码:<PRE>
a=[3,4,5,5]
sum=0
for i in a
    sum+=i
end
print sum   #输出为17
</PRE>

<P>

<H3><A NAME="SECTION00062200000000000000">
while语句</A>
</H3>
while语句由一个控制表达式和子语句组成，while语句循环执行子语句中的内容，直到表达式的结果为假，语法规则文法表示为:<PRE>
while_stmt = "while" expr while_delimiter
                  stmts
             "end"
while_delimiter = "\n" | ";" | "do"
</PRE>
示例代码:<PRE>
i=0
sum=0
while i&lt;=100
    sum+=i
    i+=1
end 
print sum  #输出为: 5050
</PRE>

<P>

<H2><A NAME="SECTION00063000000000000000">
选择语句</A>
</H2>

<H3><A NAME="SECTION00063100000000000000">
if-elif-else语句</A>
</H3>
if-elif-else语句由一个if部分，零个或多个elif部分，零个或一个else部分组成。if 和 elif 部分由控制表达式和子语句组成，else部分由一个子语句组成。if-elif-else语句运行时，先从if部分开始判断控制表达式是否为真，如果为真，则执行if部分的子语句，并退出if-elif-else语句，如果为假，则会依次判断elif的控制表达式，elif的控制表达式如果为真，则执行相对应的elif的子语句，并退出if-elif-else语句。如果elif的控制表达式为假，则判断下一个elif部分。最后如果if-elif-else还没有退出，则执行else部分的语句。语法规则用文法表示为:<PRE>
if_stmt = if_part  {elif_part} [else_part] "end"
if_part = "if" expr if_delimiter stmts 
elif_part = "elif" expr if_delimiter stmts
else_part = "else" stmts
if_delimiter = "\n" | ";" | "then"
</PRE>
示例代码：<PRE>
a=2
if a==1
    print 1
elif a==2
    print 2
else 
    print "unkown"
end 
#输出为 2
</PRE>

<P>

<H2><A NAME="SECTION00064000000000000000">
跳转语句</A>
</H2>

<H3><A NAME="SECTION00064100000000000000">
break语句</A>
</H3>
break语句用于在循环语句中,当循环语句执行时，遇到break语句，则会退出循环，语法规则用文法表示为<PRE>
break_stmt = "break"
</PRE>
示例代码：<PRE>
a=[1,2,3,4,5,6] 
sum=0
for i in a
    if a ==3
        break
    end 
    sum+=i
end 
print sum   #输出为: 3
</PRE>

<P>

<H3><A NAME="SECTION00064200000000000000">
continue语句</A>
</H3>
continue语句用于循环语句中，当循环语句执行时，遇到continue语句，则会放弃执行当前循环后面的内容，重新开始下一次循环,语法规则使用文法表示为<PRE>
continue_stmt = "continue"
</PRE>
示例代码<PRE> 
i=0
sum=0
while i&lt;10
    i+=1
    if i%2==0
        continue
    end 
    sum+=i
end 
print sum   #输出为: 25
</PRE>

<P>

<H3><A NAME="SECTION00064300000000000000">
return语句</A>
</H3>
return 语句用来终止一个函数的执行，并返回表达式的值。 如果表达式被省略，或在函数内没有执行return语句，则值Nil。当执行return语句时，即使函数体中仍然还有其他语句，此函数也会停止执行。语法规则使用文法表示为：<PRE>
return_stmt = "return" [ expr ]
</PRE>
示例代码：<PRE>
func add(x,y)
    return x+y
end 

print add(3,4)   #输出为7
</PRE>
<H2><A NAME="SECTION00065000000000000000">
异常语句</A>
</H2>

<H3><A NAME="SECTION00065100000000000000">
throw语句</A>
</H3>
生成一个可由 try-catch-finally 语句处理的错误或异常，语法规则用文法表示为：<PRE>
throw_stmt = "throw" [ expr ]
</PRE>
示例代码：<PRE>
print 3
throw Error("Some Error Happend")
print 4

#输出为:  3
#         Error: "Some Error Happend"
</PRE>

<P>

<H3><A NAME="SECTION00065200000000000000">
try-catch-finally语句</A>
</H3>
try-catch-finally语句提供一种机制，用于捕捉在块的执行期间发生的各种异常。此外try-finally-catch语句还能让您指定一个代码块，并保证当控制离开try语句时，先执行该代码。语法规则用文法表示为：<PRE>
try_stmt = ( try_part finally_part  "end") |
           ( try_part [catch_part] {catch_part} 
                      [finally_part] "end" )
try_part = "try" try_demiliter stmts
catch_part = "catch" [expr] { "," expr } ["as" identifier]
             try_demiliter stmts
finally = "finally" try_demiliter stmts
try_demiliter = "\n"|";"
</PRE>
示例代码：<PRE>
try 
    i=a   #变量a未定义，运行时会抛出NameError
catch NameError as e
    print "Catch "+e.name+"Not Defined"
end 
#输出为: "Catch a Not Defined"
</PRE>
<P>

<P>

<H2><A NAME="SECTION00066000000000000000">
定义语句</A>
</H2>

<H3><A NAME="SECTION00066100000000000000">
函数定义语句</A>
</H3>
函数定义语句见``数据类型-函数''那一部分

<H3><A NAME="SECTION00066200000000000000">
类定义语句</A>
</H3>
类定义语句见``数据类型-类''那一部分

<P>

<H2><A NAME="SECTION00067000000000000000">
模块管理语句</A>
</H2>
模块是Codger组织源文件的一个基本方式，每个源文件被加载完成时，虚拟机内部会生成一个模块对象用于表示该源文件。

<H3><A NAME="SECTION00067100000000000000">
import语句</A>
</H3>
import语句用于导入其它模块到当前模块中，语法规则用文法表示为<PRE>
import_stmt ="import" identifier 
             {"." identifier} [ "as" identifier]
</PRE>
示例代码:<PRE>
import math
print math.cos(math.pi)    #输出为: -1
</PRE>
<H3><A NAME="SECTION00067200000000000000">
export语句</A>
</H3>
export用于把当前模块的对象导出，供其它模块访问，使用语法规则用文法表示为:<PRE>
export_stmt = ( "export" identifier ) |
              ( "export" expr "as" identifier )
</PRE>
示例代码：<PRE>
func add(x,y)
    return x+y
end 
export add    #当被其它模块导入时，函数add可以被其它模块访问到
</PRE>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html218"
  HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html216"
  HREF="index.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html210"
  HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html219"
  HREF="node7.html">字节码转换框架</A>
<B> Up:</B> <A NAME="tex2html217"
  HREF="index.html">index</A>
<B> Previous:</B> <A NAME="tex2html211"
  HREF="node5.html">运算符与表达式</A></DIV>
<!--End of Navigation Panel-->
<ADDRESS>
NosicLin
2012-06-03
</ADDRESS>
</BODY>
</HTML>
